{% extends 'main.html' %}

{% block content %}
<div class="min-h-[70vh] flex items-center justify-center px-4 py-12 bg-gradient-to-br from-slate-950 via-slate-900 to-slate-800">
  <div class="w-full max-w-md">
    <div class="bg-slate-900/95 backdrop-blur-xl rounded-2xl shadow-2xl border border-slate-700/50 p-8">
      
      <!-- Success Header -->
      <div class="flex flex-col items-center gap-6 mb-8 text-center">
        <!-- Success Icon -->
        <div class="relative">
          <div class="w-24 h-24 bg-gradient-to-br from-emerald-900/20 to-emerald-800/20 rounded-2xl border-2 border-emerald-800/30 p-6 flex items-center justify-center shadow-lg">
            <svg class="w-16 h-16 text-emerald-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
              <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
          </div>
          <!-- Animated checkmark glow -->
          <div class="absolute -inset-2 bg-gradient-to-r from-emerald-400/20 to-teal-400/20 rounded-2xl blur-xl animate-pulse"></div>
        </div>
        
        <div>
          <h2 class="text-3xl font-bold bg-gradient-to-r from-slate-100 via-slate-200 to-slate-300 bg-clip-text text-transparent mb-3">
            Email Sent!
          </h2>
          <p class="text-slate-400 text-lg leading-relaxed max-w-sm mx-auto">
            We've sent you instructions to reset your password.
          </p>
        </div>
      </div>

      <!-- Instructions Card -->
      <div class="bg-slate-800/50 backdrop-blur-sm rounded-xl border border-slate-700/30 p-6 space-y-4 mb-8">
        <div class="flex items-start gap-3">
          <div class="flex-shrink-0 w-10 h-10 bg-amber-900/20 rounded-lg border border-amber-800/30 flex items-center justify-center mt-0.5">
            <svg class="w-5 h-5 text-amber-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
            </svg>
          </div>
          <div class="text-sm">
            <h4 class="font-semibold text-slate-300 mb-1">Check Your Inbox</h4>
            <p class="text-slate-500">Look for an email from Gobonimo-Mart with your reset link.</p>
          </div>
        </div>

        <div class="flex items-start gap-3">
          <div class="flex-shrink-0 w-10 h-10 bg-amber-900/20 rounded-lg border border-amber-800/30 flex items-center justify-center mt-0.5">
            <svg class="w-5 h-5 text-amber-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
            </svg>
          </div>
          <div class="text-sm">
            <h4 class="font-semibold text-slate-300 mb-1">Verify Email Address</h4>
            <p class="text-slate-500">Make sure you used the correct email registered with your account.</p>
          </div>
        </div>

        <div class="flex items-start gap-3">
          <div class="flex-shrink-0 w-10 h-10 bg-amber-900/20 rounded-lg border border-amber-800/30 flex items-center justify-center mt-0.5">
            <svg class="w-5 h-5 text-amber-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
            </svg>
          </div>
          <div class="text-sm">
            <h4 class="font-semibold text-slate-300 mb-1">Check Spam Folder</h4>
            <p class="text-slate-500">Sometimes emails end up in spam/junk. Check there if you don't see it in your inbox.</p>
          </div>
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="space-y-4">
        <!-- Primary Action: Return to Login -->
        <a href="{% url 'login' %}" class="group relative w-full flex items-center justify-center gap-3 py-4 px-6 text-sm font-semibold text-white rounded-xl focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500/30 transition-all duration-200 transform hover:scale-[1.02] active:scale-[0.98] shadow-xl hover:shadow-2xl overflow-hidden bg-gradient-to-r from-emerald-600 via-emerald-500 to-emerald-400 hover:from-emerald-500 hover:via-emerald-400 hover:to-emerald-300">
          <svg class="w-5 h-5 group-hover:translate-x-1 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.75 19.5L8.25 12l7.5-7.5" />
          </svg>
          <span>Return to Sign In</span>
          <!-- Shimmer effect -->
          <div class="absolute inset-0 rounded-xl bg-gradient-to-r from-transparent via-white/20 to-transparent -skew-x-12 opacity-0 group-hover:opacity-100 transition-opacity duration-500 transform -translate-x-full group-hover:translate-x-full"></div>
        </a>

        <!-- Secondary Action: Request New Reset -->
        <a href="{% url 'password_reset' %}" class="group relative w-full flex items-center justify-center gap-3 py-4 px-6 text-sm font-semibold text-slate-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500/30 transition-all duration-200 hover:scale-[1.02] active:scale-[0.98] border-2 border-slate-700/50 hover:border-slate-600/70 hover:bg-slate-800/30 backdrop-blur-sm shadow-lg hover:shadow-xl overflow-hidden">
          <svg class="w-5 h-5 group-hover:-translate-x-1 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
          </svg>
          <span>Didn't Receive Email?</span>
          <!-- Shimmer effect -->
          <div class="absolute inset-0 rounded-xl bg-gradient-to-r from-transparent via-slate-400/10 to-transparent -skew-x-12 opacity-0 group-hover:opacity-100 transition-opacity duration-500 transform -translate-x-full group-hover:translate-x-full"></div>
        </a>
      </div>

      <!-- Progress Timeline -->
      <div class="mt-8 pt-6 border-t border-slate-700/30">
        <div class="flex items-center justify-between text-xs text-slate-500 mb-4">
          <span>1. Email Sent</span>
          <div class="flex-1 h-1 bg-slate-700/30 rounded-full mx-4">
            <div class="h-1 bg-gradient-to-r from-emerald-500 to-emerald-400 rounded-full w-1/3 animate-pulse"></div>
          </div>
          <span>2. Reset Password</span>
        </div>
      </div>

      <!-- Helpful Tips -->
      <div class="mt-6 p-4 bg-slate-800/30 backdrop-blur-sm rounded-xl border border-slate-700/30">
        <h5 class="font-semibold text-slate-300 text-sm mb-2 flex items-center gap-2">
          <svg class="w-4 h-4 text-amber-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
          Quick Tips
        </h5>
        <ul class="text-xs text-slate-500 space-y-1">
          <li class="flex items-center gap-2">• Wait 2-3 minutes for email delivery</li>
          <li class="flex items-center gap-2">• Check all folders (Promotions, Social, Updates)</li>
          <li class="flex items-center gap-2">• Add <span class="font-mono text-slate-400">noreply@gobonimo-mart.com</span> to contacts</li>
        </ul>
      </div>
    </div>
  </div>
</div>

<script>
  // Enhanced UX interactions
  document.addEventListener('DOMContentLoaded', function() {
    // Animate instructions list
    const instructions = document.querySelectorAll('[class*="bg-amber"]');
    instructions.forEach((item, index) => {
      item.style.opacity = '0';
      item.style.transform = 'translateY(10px)';
      setTimeout(() => {
        item.style.transition = 'all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94)';
        item.style.opacity = '1';
        item.style.transform = 'translateY(0)';
      }, index * 150);
    });

    // Add hover effects to buttons
    const buttons = document.querySelectorAll('a[href]');
    buttons.forEach(btn => {
      btn.addEventListener('mouseenter', function() {
        this.style.transform = 'translateY(-1px)';
      });
      btn.addEventListener('mouseleave', function() {
        this.style.transform = 'translateY(0)';
      });
    });

    // Auto-scroll to top when page loads
    window.scrollTo({ top: 0, behavior: 'smooth' });

    // Email delivery timer
    let timeLeft = 120; // 2 minutes
    const timerEl = document.createElement('div');
    timerEl.className = 'text-center text-sm text-slate-500 mt-4';
    timerEl.innerHTML = '⏱️ Email should arrive in <span id="timer">2:00</span>';
    
    const card = document.querySelector('.bg-slate-900\\/95');
    card.appendChild(timerEl);
    
    const timerInterval = setInterval(() => {
      timeLeft--;
      const minutes = Math.floor(timeLeft / 60);
      const seconds = timeLeft % 60;
      document.getElementById('timer').textContent = 
        `${minutes}:${seconds.toString().padStart(2, '0')}`;
      
      if (timeLeft <= 0) {
        clearInterval(timerInterval);
        timerEl.innerHTML = `
          <span class="text-amber-400">⏰</span> 
          <span class="font-semibold">Still waiting?</span> 
          <a href="{% url 'password_reset' %}" class="text-emerald-400 hover:text-emerald-300 underline">Send new email</a>
        `;
      }
    }, 1000);

    // Show helpful tooltip on hover
    const tipsSection = document.querySelector('.bg-slate-800\\/30');
    if (tipsSection) {
      tipsSection.addEventListener('mouseenter', function() {
        this.style.transform = 'scale(1.02)';
      });
      tipsSection.addEventListener('mouseleave', function() {
        this.style.transform = 'scale(1)';
      });
    }
  });

  // Track user interactions for analytics (optional)
  function trackAction(action) {
    // In production, send to analytics service
    console.log(`User action: ${action}`);
    
    // Show micro-interaction feedback
    const feedback = document.createElement('div');
    feedback.className = 'fixed top-4 right-4 bg-emerald-500/90 text-white px-4 py-2 rounded-lg shadow-lg z-50 flex items-center gap-2 animate-slide-in';
    feedback.innerHTML = `
      <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
      </svg>
      ${action} successful
    `;
    
    document.body.appendChild(feedback);
    
    setTimeout(() => {
      feedback.style.animation = 'slide-out 0.3s ease-out forwards';
      setTimeout(() => feedback.remove(), 300);
    }, 2000);
  }

  // Add click tracking to buttons
  document.querySelectorAll('a[href]').forEach(link => {
    link.addEventListener('click', function() {
      const action = this.textContent.trim().split(' ')[0];
      trackAction(action);
    });
  });
</script>

<style>
  /* Enhanced animations */
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes slideIn {
    from {
      opacity: 0;
      transform: translateX(100%);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  @keyframes slideOut {
    from {
      opacity: 1;
      transform: translateX(0);
    }
    to {
      opacity: 0;
      transform: translateX(100%);
    }
  }

  .bg-slate-900\/95 {
    animation: fadeInUp 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  }

  .animate-slide-in {
    animation: slideIn 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  }

  /* Custom scrollbar for instructions */
  .bg-slate-800\/50 {
    scrollbar-width: thin;
    scrollbar-color: #64748b transparent;
  }

  .bg-slate-800\/50::-webkit-scrollbar {
    width: 4px;
  }

  .bg-slate-800\/50::-webkit-scrollbar-track {
    background: transparent;
  }

  .bg-slate-800\/50::-webkit-scrollbar-thumb {
    background: #64748b;
    border-radius: 2px;
  }

  /* Timeline progress bar */
  .animate-pulse {
    animation-duration: 2s;
  }

  /* Button glow effects */
  .shadow-2xl {
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
  }

  .hover\:shadow-emerald-500\/10:hover {
    box-shadow: 0 25px 50px -12px rgba(16, 185, 129, 0.1);
  }

  /* Hover scale for tips section */
  .bg-slate-800\/30 {
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* Responsive adjustments */
  @media (max-width: 640px) {
    .max-w-md {
      max-width: 90vw;
    }
    
    .text-3xl {
      font-size: 1.875rem;
    }
  }
</style>
{% endblock %}